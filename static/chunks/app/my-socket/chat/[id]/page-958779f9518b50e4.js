(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[55],{3980:(e,t,s)=>{Promise.resolve().then(s.bind(s,2285))},2278:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(7437),a=s(2265);let r=function(e){let{text_btn:t="Create",header:s="Props header none",placeholder:r="...",children:n,ls_name:o="io_name",handles:l=!1}=e,[c,m]=(0,a.useState)("");return(0,a.useEffect)(()=>{{let e=localStorage.getItem(o);e&&m(e.toString())}},[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"text_shadow",children:(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"fs-1 pb-1 d-block",children:s}),n,(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),localStorage&&localStorage.setItem(o,c),l&&l(c)},children:(0,i.jsxs)("div",{className:"input-group mb-3",children:[(0,i.jsx)("input",{type:"text",value:c,onChange:e=>m(e.target.value),className:"form-control",placeholder:r,"aria-label":r}),(0,i.jsx)("button",{className:"btn btn-outline-light",type:"submit",children:t})]})})]})})})}},9887:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var i=s(7437),a=s(6648);let r=function(e){let{pic_url_pc_web:t,pic_url_pc_other:s,pic_url_mob_web:r,pic_url_mob_other:n,pic_url:o,alt:l,head:c,children:m,after_head:d,styles_container:u={},st_container:g="min-vh-100"}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("header",{className:"container-fluid position-relative",children:[(0,i.jsxs)("picture",{className:"bg_img",children:[(0,i.jsx)("source",{srcSet:t,type:"image/webp",media:"(min-width: 769px)"}),(0,i.jsx)("source",{srcSet:s,type:"image/jpeg",media:"(min-width: 769px)"}),(0,i.jsx)("source",{srcSet:r,type:"image/webp",media:"(max-width: 768px)"}),(0,i.jsx)("source",{srcSet:n,type:"image/jpeg",media:"(max-width: 768px)"}),(0,i.jsx)(a.default,{src:o,alt:l,width:100,height:100})]}),(0,i.jsx)("div",{className:"container-lg d-flex justify-content-center align-items-center ".concat(g),children:(0,i.jsxs)("div",{style:u,className:"py-4",children:[c||d?(0,i.jsxs)("div",{className:"pb-5",children:[(0,i.jsx)("h1",{className:"text_shadow display-2",style:{fontWeight:400},children:c}),d]}):null,m]})})]})})}},2285:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>v});var i=s(7437),a=s(2265),r=s(6485),n=s(9887),o=s(6463);let l=function(e){let t=(0,o.useRouter)(),s=(0,o.usePathname)(),[i,r]=(0,a.useState)(!1);(0,a.useEffect)(()=>(console.log(i),!0==i?(r(!1),console.log(i),e("leaveRoom")):(r(!0),e("check")),()=>{e("leaveRoom")}),[s]),(0,a.useEffect)(()=>{let t=t=>{e("leaveRoom"),console.log(t)},s=()=>{"hidden"===document.visibilityState?e("afk"):"visible"===document.visibilityState&&e("back")};return window.addEventListener("beforeunload",t),document.addEventListener("visibilitychange",s),()=>{window.removeEventListener("beforeunload",t),document.removeEventListener("visibilitychange",s)}},[t,e])};var c=s(2278);let m=JSON.parse('[{"emoji":"\uD83D\uDE00","name":"Grinning Face"},{"emoji":"\uD83D\uDE02","name":"Face with Tears of Joy"},{"emoji":"❤️","name":"Red Heart"},{"emoji":"\uD83D\uDE0D","name":"Smiling Face with Heart-Eyes"},{"emoji":"\uD83D\uDE0A","name":"Smiling Face with Smiling Eyes"},{"emoji":"\uD83D\uDE2D","name":"Loudly Crying Face"},{"emoji":"\uD83D\uDC4D","name":"Thumbs Up"},{"emoji":"\uD83D\uDD25","name":"Fire"},{"emoji":"\uD83E\uDD70","name":"Smiling Face with Hearts"},{"emoji":"\uD83D\uDE0E","name":"Smiling Face with Sunglasses"},{"emoji":"\uD83C\uDF89","name":"Party Popper"},{"emoji":"✨","name":"Sparkles"},{"emoji":"\uD83D\uDE01","name":"Beaming Face with Smiling Eyes"},{"emoji":"\uD83D\uDE22","name":"Crying Face"},{"emoji":"\uD83E\uDD23","name":"Rolling on the Floor Laughing"},{"emoji":"\uD83D\uDE4F","name":"Folded Hands"},{"emoji":"\uD83E\uDD7A","name":"Pleading Face"},{"emoji":"\uD83D\uDE05","name":"Grinning Face with Sweat"},{"emoji":"\uD83E\uDD14","name":"Thinking Face"},{"emoji":"\uD83D\uDE4C","name":"Raising Hands"},{"emoji":"\uD83D\uDC94","name":"Broken Heart"},{"emoji":"\uD83D\uDE18","name":"Face Blowing a Kiss"},{"emoji":"\uD83D\uDE04","name":"Grinning Face with Smiling Eyes"},{"emoji":"\uD83D\uDE1C","name":"Winking Face with Tongue"},{"emoji":"\uD83E\uDEF6","name":"Heart Hands"},{"emoji":"\uD83E\uDD29","name":"Star-Struck"},{"emoji":"\uD83E\uDD17","name":"Hugging Face"},{"emoji":"\uD83D\uDE0B","name":"Face Savoring Food"},{"emoji":"\uD83E\uDD2D","name":"Face with Hand Over Mouth"},{"emoji":"\uD83D\uDE21","name":"Pouting Face"}]');var d=s(6648),u=s(7138);let g=function(e){let{animgo:t}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("svg",{"data-animgo":t,className:"anim_svg_double_check",fill:"none",height:"18",viewBox:"0 0 24 24",width:"18",xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("path",{d:"M2 12L7.25 17C7.25 17 8.66939 15.3778 9.875 14",stroke:"#212529bf",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",strokeDasharray:"11",strokeDashoffset:"11"}),(0,i.jsx)("path",{d:"M8 12L13.25 17L22 7",stroke:"#212529bf",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",strokeDasharray:"21",strokeDashoffset:"0",children:(0,i.jsx)("animate",{attributeName:"stroke-dashoffset",from:"21",to:"0",dur:"1s",fill:"freeze"})}),(0,i.jsx)("path",{d:"M16 7L12.5 11",stroke:"#212529bf",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",strokeDasharray:"5",strokeDashoffset:"5"})]})})},h={src:"/_next/static/media/no-image-available.8dd0cd6b.webp",height:400,width:400,blurDataURL:"data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAAAwAQCdASoIAAgAAkA4JaQAA3AA/vsBDPZ2L8ZFq4tVklYAAAA=",blurWidth:8,blurHeight:8},p={src:"/_next/static/media/no-image-available.bc4d8958.jpg",height:400,width:400,blurDataURL:"data:image/jpeg;base64,/9j/2wBDAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/2wBDAQoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/v/wgARCAAIAAgDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAf/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAACxg//EABkQAAEFAAAAAAAAAAAAAAAAAAEAAxIjMf/aAAgBAQABPwC0OnIL/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAwEBPwB//9k=",blurWidth:8,blurHeight:8},A=e=>{let t=e.match(/https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([\w-]+)/);if(t)return{type:"youtube",url:"https://www.youtube.com/embed/".concat(t[1])};let s=e.match(/(https?:\/\/.*\.(?:png|jpg|jpeg|gif|webp|svg|icon))/i);if(s)return{type:"image",url:s[1]};let i=e.match(/(https?:\/\/.*\.mp4)/i);if(i)return{type:"mp4",url:i[1]};let a=e.match(/https?:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(?:\/\S*)?/);return a?{type:"link",url:a[0]}:null},f=e=>{let t=/(https?:\/\/[^\s]+)/g;return e.split(t).map((e,s)=>e.match(t)?(0,i.jsx)(u.default,{href:e,passHref:!0,target:"_blank",children:e},s):e)},j=e=>{let{media:t,seo:s}=e;return"youtube"===t.type?(0,i.jsx)("div",{className:"col-md-4 bg-primary",children:(0,i.jsx)("iframe",{className:"video-frame",width:"100%",height:"100%",src:t.url,title:s.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):"image"===t.type?(0,i.jsx)("div",{className:"col-md-12 bg-primary-subtle",children:(0,i.jsx)(d.default,{className:"img-fluid rounded-start position-relative br-0",src:t.url,alt:s.title,layout:"fill",objectFit:"contain",unoptimized:!0,style:{maxHeight:300}})}):"mp4"===t.type?(0,i.jsx)("div",{className:"col-md-12 bg-primary",children:(0,i.jsxs)("video",{className:"img-fluid rounded-start position-relative br-0",width:"100%",height:"100%",style:{maxHeight:200},controls:!0,children:[(0,i.jsx)("source",{src:t.url,type:"video/mp4"}),"Your browser does not support video."]})}):(0,i.jsx)("div",{className:"col-md-4 bg-primary-subtle",children:s.image?(0,i.jsx)(d.default,{className:"img-fluid rounded-start position-relative br-0",src:s.image,alt:s.title,layout:"fill",objectFit:"cover",unoptimized:!0,style:{maxHeight:300}}):(0,i.jsxs)("picture",{children:[(0,i.jsx)("source",{srcSet:h,type:"image/webp"}),(0,i.jsx)("source",{srcSet:p,type:"image/jpg"}),(0,i.jsx)(d.default,{className:"img-fluid rounded-start position-relative br-0",src:h,alt:"no image available",layout:"fill",objectFit:"cover",unoptimized:!0})]})})},x=e=>{let{seo:t}=e;return(0,i.jsx)("div",{className:"bg-primary-subtle ".concat(t.title||t.description?"col-md-8":"col-md-12"),children:(0,i.jsxs)("div",{className:"card-body ".concat(t.title||t.description?"ps-0 pt-0 pe-0":"p-0 m-0"),children:[(0,i.jsx)("div",{className:"card-title bg-primary py-2 px-3 ".concat(t.title||t.description?"border-3 border-bottom border-light":"m-0"),children:t.link&&(0,i.jsx)(u.default,{href:t.link,className:"text-light fs-6",target:"_blank",children:t.site_name})}),t.title||t.description?(0,i.jsxs)("div",{className:"ps-3 pe-3",children:[t.title&&(0,i.jsx)("h5",{className:"card-text fs-7",children:t.title}),t.description&&(0,i.jsx)("p",{className:"card-text fs-8",children:t.description})]}):null]})})},b=function(e){let{messages:t,participants:s}=e,[r,n]=(0,a.useState)([]),o=(0,a.useRef)(0),l=(0,a.useMemo)(()=>t.map(e=>{let t=A(e.msg);return{...e,media:t,parsedMessage:f(e.msg)}}),[t]);return(0,a.useEffect)(()=>{let e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){let s=t.target.getAttribute("data-index");n(e=>{let t=[...e];return t[s]=!0,t}),o.current=Math.max(o.current,s),e.unobserve(t.target)}})},{root:null,threshold:.1});for(let t=o.current;t<l.length;t++){let s=document.querySelector('[data-index="'.concat(t,'"]'));s&&e.observe(s)}return()=>{e.disconnect()}},[l]),(0,i.jsx)(i.Fragment,{children:l.map((e,t)=>(0,i.jsxs)("li",{className:"mb-1 g_ww_bw noticed","data-index":t,"data-noticed":r[t]?"true":"false",children:[(0,i.jsxs)("div",{style:{fontSize:"12px"},className:"m-0 text-black text-muted d-flex justify-content-between anim_opasity_show",children:[(0,i.jsx)("span",{className:"me-2 status_marker",status:void 0===s[e.socketId]?"none":s[e.socketId].status,children:e.who}),(0,i.jsx)("span",{className:"d-flex align-items-center",children:(0,i.jsx)("time",{className:"ms-2",dateTime:e.time,children:new Date(e.time).toLocaleTimeString()})})]}),(0,i.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,i.jsx)("p",{className:"m-0 ms-2 pe-5 text-black anim_opasity_show",children:e.parsedMessage}),(0,i.jsx)("span",{className:"d-flex align-items-end",children:(0,i.jsx)(g,{animgo:void 0!==r[t]?"true":"false"})})]}),e.seo&&(0,i.jsx)("div",{className:"card mt-2 mb-3 border-primary overflow-hidden anim_opasity_show",children:(0,i.jsxs)("div",{className:"row g-0",children:[e.media?(0,i.jsx)(j,{media:e.media,seo:e.seo}):(0,i.jsx)("div",{className:"col-md-4 bg-primary",children:e.seo.image?(0,i.jsx)(d.default,{className:"img-fluid rounded-start position-relative br-0",src:e.seo.image,alt:e.seo.title,layout:"fill",objectFit:"cover",unoptimized:!0}):(0,i.jsxs)("picture",{children:[(0,i.jsx)("source",{srcSet:h,type:"image/webp"}),(0,i.jsx)("source",{srcSet:p,type:"image/jpg"}),(0,i.jsx)(d.default,{className:"img-fluid rounded-start position-relative br-0",src:h,alt:"no image available",layout:"fill",objectFit:"cover",unoptimized:!0})]})}),(0,i.jsx)(x,{seo:e.seo})]})})]},t))})};function v(e){let{params:t}=e,s=(0,a.useRef)(null),[o,d]=(0,a.useState)(m),{id:u}=(0,a.use)(t),[g,h]=(0,a.useState)(()=>{{let e=localStorage.getItem("io_name");return!!e&&e}});l(e=>{console.log(e),"leaveRoom"===e?(console.log("User left the page"),r.socket.emit("leaveRoom",{roomId:u,login:g,status:"leaveRoom"}),r.socket.disconnect(!0)):"afk"===e?(r.socket.emit("afk_user_chat",{roomId:u,login:g,status:"afk"}),k(!1)):"back"===e&&r.socket.emit("user_back_chat",{roomId:u,login:g,status:"online"})});let[p,A]=(0,a.useState)({}),[f,j]=(0,a.useState)(""),[x,v]=(0,a.useState)([]),w=(0,a.useRef)(null),[y,k]=(0,a.useState)(!0),_=e=>{let t=e.target.value.trimStart();j(t),1===t.length?r.socket.emit("typing_user_chat",{roomId:u,login:g,status:"typing"}):(0===t.length||""==t)&&r.socket.emit("typing_user_chat",{roomId:u,login:g,status:"online"})};(0,a.useEffect)(()=>{(1===f.length||2===f.length)&&r.socket.emit("typing_user_chat",{roomId:u,login:g,status:"typing"})},[f]),(0,a.useEffect)(()=>(r.socket.connect(),r.socket.emit("joinRoom",{roomId:u,login:g,status:"online"}),r.socket.on("total_socket",e=>{A(t=>Object.fromEntries(Object.entries(t).filter(t=>{let[s]=t;return e.includes(s)})))}),r.socket.on("status_user_chat",e=>{A(t=>{if("leaveRoom"!==e.status)return{...t,[e.id]:{...t[e.id],...e}};{let{[e.id]:s,...i}=t;return i}})}),r.socket.on("all_participants",e=>{A(t=>{let s={...t};return Object.entries(e).forEach(e=>{let[t,i]=e;s[t]={...s[t]||{},...i}}),s})}),r.socket.on("message_me",e=>{let t=new Date().toISOString(),s={...e,noticed:"false",time:t};v(e=>[...e,s])}),()=>{r.socket.off("message_me"),r.socket.off("status_user_chat"),r.socket.disconnect(!0)}),[u]),(0,a.useEffect)(()=>(r.socket.once("give_me_participants",e=>{let t=e.im,s=e.who,i=e.login,a=e.ArrSocketInRoom,n=Object.fromEntries(Object.entries(p).filter(e=>{let[t]=e;return a.includes(t)}));setTimeout(()=>{r.socket.emit("forwarding_participants",{who:t,im:s,sender_login:g,recipient_login:i,roomId:u,what:n})},100)}),()=>{r.socket.off("give_me_participants")}),[p]),(0,a.useEffect)(()=>{y&&w.current.scrollTo({top:w.current.scrollHeight,behavior:"smooth"})},[x]);let[N,S]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;S(t.isIntersecting)},{root:null,threshold:0,rootMargin:"-300px 0px -300px 0px"});return w.current&&e.observe(w.current),()=>{w.current&&e.unobserve(w.current)}},[]),(0,a.useEffect)(()=>{N||k(!1)},[N]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.Z,{pic_url_pc_web:"./../../gif/working.gif",pic_url_pc_other:"./../../gif/working.gif",pic_url_mob_web:"./../../gif/mob_working.gif",pic_url_mob_other:"./../../gif/mob_working.gif",pic_url:"/../../gif/working.gif",alt:"this worging gif",head:"Yor id chating: ".concat(u),styles_container:{maxWidth:700,width:"100%"},after_head:(0,i.jsx)(c.Z,{header:"Do you want to change your name?",placeholder:"Your name...",ls:!0,ls_name:"io_name",handles:e=>{g!==e&&(r.socket.emit("new_login",{roomId:u,login:e}),h(e))}}),children:(0,i.jsx)("div",{className:"container-lg d-flex justify-content-center align-items-center px-0",children:(0,i.jsx)("div",{style:{maxWidth:700,width:"100%"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsxs)("ul",{style:{fontSize:"12px"},className:"d-inline-flex align-items-center flex-wrap m-0 p-0",children:[(0,i.jsx)("li",{style:{listStyle:"none"},className:"fs-6",children:(0,i.jsx)("span",{className:"d-flex align-items-center",children:"Participants:"})}),Object.keys(p).map((e,t)=>(0,i.jsx)("li",{className:"ms-3 status_marker text-secondary anim_opasity_show",status:p[e].status,children:(0,i.jsx)("span",{children:p[e].who})},t+e))]})}),(0,i.jsx)("div",{className:"bg-light mb-3 border border-secondary border-2 rounded",ref:w,onMouseOver:e=>k(!1),onMouseOut:e=>k(!0),style:{height:400,overflowY:"auto"},children:(0,i.jsx)("ul",{className:"p-3",children:(0,i.jsx)(b,{messages:x,participants:p,chatListReff:w})})}),(0,i.jsx)("div",{className:"bg-light mb-3 border border-secondary border-2 rounded d-flex",style:{height:"auto",overflowY:"hidden",overflowX:"auto"},children:o.map((e,t)=>(0,i.jsx)("button",{className:"btn_none m-1 scaleHover",onClick:()=>(j(f+e.emoji),s.current.focus()),children:e.emoji},t))}),(0,i.jsx)("form",{onSubmit:e=>{e.preventDefault(),""!==f&&(r.socket.emit("message",{msg:f,roomId:u,login:g}),j(""),r.socket.emit("typing_user_chat",{roomId:u,login:g,status:"online"}))},children:(0,i.jsxs)("div",{className:"input-group mb-3",children:[(0,i.jsx)("input",{ref:s,type:"text",value:f,onChange:e=>_(e),className:"form-control",placeholder:"Enter chat name","aria-label":"Enter chat name"}),(0,i.jsx)("button",{className:"btn btn-outline-light",type:"submit",children:"Enter"})]})})]})})})})})}},6463:(e,t,s)=>{"use strict";var i=s(1169);s.o(i,"usePathname")&&s.d(t,{usePathname:function(){return i.usePathname}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},6485:(e,t,s)=>{"use strict";s.r(t),s.d(t,{socket:()=>i});let i=(0,s(5040).io)()}},e=>{var t=t=>e(e.s=t);e.O(0,[173,40,974,130,215,744],()=>t(3980)),_N_E=e.O()}]);